{"mappings":"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","sources":["src/components/trailer/fetch-trailer.js","src/components/movie-main/movie-main.js","src/api.js","src/components/modal-info/fetch-info.js","src/components/modal-info/modal.js"],"sourcesContent":["async function fetchTrailer(id) {\n  const KEY = '7113ba9605fd4f5593de8c8922948eb6';\n  const BASE = 'https://api.themoviedb.org/3/movie';\n  const response = await fetch(`${BASE}/${id}/videos?api_key=${KEY}`);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  }\n  return await response.json();\n}\n\nexport { fetchTrailer };\n","import API from '../../api';\nimport {createFilmCardMarkap} from '../film-card/film-card-markup';\n\nconst axios = require('axios').default;\n\nconst API_KEY = '7b4917c1c89b56950d6ac1f3ef5382d2';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nlet page = 1;\n\nshowMovie();\n\nconst filmCardList = document.querySelector('.hero__list');\n\nfunction showMovie() {\n  fetchPopularMovie(page)\n\n    .then(dataArrey => {\n      filmCardList.insertAdjacentHTML(\n        'beforeend',\n        createFilmCardMarkap(dataArrey)\n      );\n    })\n    .catch(error => console.log(error));\n}\n\n// ПОПУЛЯРНЫЕ ФИЛЬМЫ НА ГЛАВНОЙ СТРАНИЦЕ\n\nasync function fetchPopularMovie(page) {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}`\n    );\n\n    page += 1;\n    console.log(response.data);\n    console.log(response.data.results);\n    return response.data.results;\n  } catch (error) {\n    console.log(`${error}`);\n  }\n}\n\nexport default {showMovie, fetchPopularMovie};\n\n\n//=======================================Пошук по ключовому слову===============================\n\n\nimport {getMoviesByName} from \"../../api.js\";\n\n\nconst searchForm = document.forms[0];\nconst searchInput = searchForm[1]\nconst searchButton = searchForm[2]\n\nconst errorMessage = document.querySelector('div[id=\"search_error\"]')\nerrorMessage.style.opacity = \"0\"\nerrorMessage.style.transition = \"opacity 0.5s\"\n\nsearchButton.addEventListener('click', (e) => {\n  e.preventDefault()\n  if (!searchInput.value.trim()) {\n    errorMessage.style.opacity = \"1\"\n    setTimeout(errorInfoHidden, 3000)\n\n    return\n  }\n\n  getMovie()\n\n  searchForm.reset()\n})\nsearchInput.addEventListener('input', (e) => {\n  e.preventDefault()\n  getMoviesByName(searchInput.value.trim(), 1)\n    .then((data) => {\n      data.map(({title}) => {\n        console.log(title)\n      })\n    })\n\n    .catch(error => console.log(error))\n})\n\nfunction getMovie() {\n  getMoviesByName(searchInput.value.trim(), 1)\n    .then(data => {\n      if (!data.length) {\n        errorMessage.style.opacity = \"1\"\n        setTimeout(errorInfoHidden, 3000)\n        return\n      }\n      filmCardList.innerHTML = ''\n\n      filmCardList.insertAdjacentHTML('beforeend', createFilmCardMarkap(data))\n    })\n    .catch(error => console.log(error));\n}\n\nfunction errorInfoHidden() {\n  errorMessage.style.opacity = \"0\"\n}\n\n","// здесь будут храниться функции для получения значений из бек-енда\n\nimport axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'b972cd435eef10c3549386c0239d193f';\nconst SEARCH_URL = `${BASE_URL}/search/movie?api_key=${API_KEY}`;\n\nasync function getMoviesByName(querySearch, page) {\n  try {\n    const response = await axios.get(SEARCH_URL, {\n      params: {\n        query: querySearch,\n        page: page\n      }\n    });\n    return response.data.results;\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nexport {getMoviesByName}","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'b972cd435eef10c3549386c0239d193f';\n\nconst fetchModalInfo = async (movieId) => {\n    const response = await axios.get(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`);\n    return response.data;\n}\n\nexport { fetchModalInfo };","import { fetchModalInfo } from './fetch-info';\nimport { transformGenresOnModal } from '../film-card/fetchGenres';\n\nconst URL_IMG = 'https://image.tmdb.org/t/p/w500';\n\nconst refs = {\n  backdrop: document.querySelector('.backdrop'),\n  modal: document.querySelector('.modal-wrap'),\n  filmList: document.querySelector('.hero__list'),\n  btnClose: document.querySelector('.modal__cross-btn'),\n  body: document.querySelector('body')\n}\n\nconst { backdrop, modal, filmList, btnClose, body } = refs;\n\nfilmList.addEventListener('click', OnOpenModal);\n\n// обработчик событий\nfunction OnOpenModal(e) {\n  e.preventDefault();\n\n  const card = e.target.closest('li');\n  const filmId = card.dataset.action;\n\n  if (!card) {\n    return;\n  }\n\n  fetchModalInfo(filmId)\n    .then(data => {\n      createModalsMarkup(data);\n    })\n    .catch(error => console.log(error));\n\n  backdrop.classList.toggle('is-hidden');\n\n  document.addEventListener('keydown', onCloseEsc)\n    \n  function onCloseEsc(e) {\n    if (e.code === 'Escape') {\n      modal.innerHTML = '';\n      backdrop.classList.add('is-hidden');\n      body.classList.remove('scroll-hidden');\n      document.removeEventListener('keydown', onCloseEsc)\n    }\n  }\n\n  btnClose.addEventListener('click', e => {\n    modal.innerHTML = '';\n    backdrop.classList.add('is-hidden');\n    body.classList.remove('scroll-hidden');\n  })\n\n  backdrop.addEventListener('click', e => {\n    if (e.target === backdrop) {\n      modal.innerHTML = '';\n      backdrop.classList.add('is-hidden');\n      body.classList.remove('scroll-hidden');\n    }\n  });\n\n  if (!backdrop.classList.contains('is-hidden')) {\n    body.classList.add('scroll-hidden');\n  }\n}\n\n// создание разметки\nfunction createModalsMarkup({ popularity, poster_path, genres, overview, original_title, vote_average, vote_count}) {\n  const markup = `\n            <img class=\"modal__img\" src=\"${URL_IMG}${poster_path}\" alt=\"poster\" />\n            <div class=\"modal__major-container\">\n                <h3 class=\"modal__title\">${original_title}</h3>\n                <div class=\"modal__sheet\">\n                        <ul class=\"modal__list\">\n                        <li class=\"modal__item\">Vote / Votes</li>\n                        <li class=\"modal__item\">Popularity</li>\n                        <li class=\"modal__item\">Original Title</li>\n                        <li class=\"modal__item\">Genre</li>\n                    </ul>\n                <ul class=\"modal__list\">\n                    <li class=\"modal__item modal__item--flex modal__item--bold\">\n                        <span class=\"modal__item--vote\">${vote_average.toFixed(1)}</span> /\n                        <span class=\"modal__item--votes\">${vote_count}</span>\n                    </li>\n                    <li class=\"modal__item modal__item--bold\">${popularity.toFixed(1)}</li>\n                    <li class=\"modal__item modal__item--bold\">${original_title}</li>\n                    <li class=\"modal__item modal__item--bold\">${transformGenresOnModal(genres)}</li>\n                </ul>\n                </div>\n                <div class=\"modal__about\">\n                <p class=\"modal__about-title\">ABOUT</p>\n                <p class=\"modal__about-descr\">${overview}</p>\n                </div>\n                <ul class=\"modal__btn-container\">\n                <li class=\"modal__btn modal__btn--watched\">Add to Watched</li>\n                <li class=\"modal__btn modal__btn--queue\">Add to queue</li>\n                </ul>\n            </div>\n        </div>\n    `;\n  return modal.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["$bpxeT","parcelRequire","$2f5c62d89cd5eff1$var$SEARCH_URL","concat","$2f5c62d89cd5eff1$export$7c7668425a2ab9af","querySearch","page","$2f5c62d89cd5eff1$var$_getMoviesByName","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","$dIxxU","default","get","params","query","_ctx","sent","data","results","console","log","t0","$4e5ec98397759679$var$API_KEY","$4e5ec98397759679$var$BASE_URL","$4e5ec98397759679$var$showMovie","$4e5ec98397759679$var$filmCardList","document","querySelector","$4e5ec98397759679$var$fetchPopularMovie","then","dataArrey","insertAdjacentHTML","$idiT7","createFilmCardMarkap","catch","error","page1","$4e5ec98397759679$var$_fetchPopularMovie","$4e5ec98397759679$require$axios","$4e5ec98397759679$var$searchForm","forms","$4e5ec98397759679$var$searchInput","$4e5ec98397759679$var$searchButton","$4e5ec98397759679$var$errorMessage","$4e5ec98397759679$var$errorInfoHidden","style","opacity","transition","addEventListener","e","preventDefault","value","trim","setTimeout","length","innerHTML","reset","map","param","title","$d3d6a55a72a368d3$export$79073a37d12c0c2d","movieId","$99e06b9fb8a304f0$var$URL_IMG","$99e06b9fb8a304f0$var$refs","backdrop","modal","filmList","btnClose","body","$99e06b9fb8a304f0$var$backdrop","$99e06b9fb8a304f0$var$modal","$99e06b9fb8a304f0$var$btnClose","$99e06b9fb8a304f0$var$body","e1","card","target","closest","filmId","dataset","action","popularity","poster_path","genres","overview","original_title","vote_average","vote_count","markup","toFixed","$9FjBp","transformGenresOnModal","classList","toggle","onCloseEsc","code","add","remove","removeEventListener","contains"],"version":3,"file":"index.514a0eea.js.map"}